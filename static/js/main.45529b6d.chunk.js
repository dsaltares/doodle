(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],{1023:function(e,t){},1025:function(e,t){},1034:function(e,t){},1036:function(e,t){},1068:function(e,t){},1069:function(e,t){},1074:function(e,t){},1076:function(e,t){},1100:function(e,t){},1139:function(e,t){},1562:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"playerIds",(function(){return re})),a.d(n,"waitingPlayerIds",(function(){return oe})),a.d(n,"player",(function(){return ce})),a.d(n,"isWaiting",(function(){return ie})),a.d(n,"isFirstCreateTurn",(function(){return le})),a.d(n,"getSourceEntry",(function(){return se})),a.d(n,"currentConcept",(function(){return me})),a.d(n,"currentDrawing",(function(){return de})),a.d(n,"sourceEntryAuthor",(function(){return pe})),a.d(n,"playerHasSubmitted",(function(){return fe})),a.d(n,"hasSubmitted",(function(){return he}));var r,o=a(0),c=a.n(o),i=a(31),l=a.n(i),u=a(27),s=a(1631),m=a(68),d=a(209),p=a(50),f=a(1627),h=a(1607),g=a(1632),E=a(1620),y=a(1619),v=a(1642),b=a(383),w=a(1604),C=Object(w.a)((function(e){return{paper:function(t){return{padding:e.spacing(3),maxWidth:t.width}}}})),k=function(e){var t=e.children,a=e.width,n=C({width:void 0===a?500:a});return c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(b.a,{variant:"outlined",className:n.paper},c.a.createElement(h.a,{container:!0,direction:"column",spacing:2},t)))},j=function(e){var t=e.symbol,a=e.label,n=e.className;return c.a.createElement("span",{className:n,role:"img","aria-label":a,"aria-hidden":a?"false":"true"},t)},O=Object(w.a)((function(){return{buttonGroup:{flex:1},button:{flex:1}}})),x=a(1613),S=a(1617),T=a(1615),P=a(1616),G=a(658),N=a.n(G),W=a(1612),R=a(48),I=a(1611),U=a(1608),A=a(1609),D=a(1610),B=a(113),L=function(e){var t=e.emoji,a=e.text,n=e.divider;return c.a.createElement(U.a,{divider:n},c.a.createElement(A.a,null,c.a.createElement(B.a,{variant:"h4"},c.a.createElement(j,{symbol:t}))),c.a.createElement(D.a,{primary:a}))},F=[{emoji:"\ud83c\udfae",text:"Create a game."},{emoji:"\ud83d\udd17",text:"Share the link with friends. Remember, Doodle is best played on a video call!"},{emoji:"\ud83e\udd2b",text:"Every player chooses a concept. But keep it secret!"},{emoji:"\u270f\ufe0f",text:"Draw your concept. Don't know how to draw? Worry not, the worse you draw, the more fun the round will be!"},{emoji:"\ud83e\udd14",text:"Now guess what another player drew."},{emoji:"\u270f\ufe0f",text:"Time to draw what another player guessed!"},{emoji:"\ud83d\ude4c",text:"When the round is done, each player chooses their favourite entry for their concept."}],H=function(){return c.a.createElement(I.a,null,F.map((function(e,t){return c.a.createElement(L,{key:t,emoji:e.emoji,text:e.text,divider:t<F.length-1})})))},M=function(e){var t=e.open,a=e.onClose,n=Object(R.a)(),r=Object(W.a)(n.breakpoints.down("sm"));return c.a.createElement(x.a,{fullScreen:r,open:t,onClose:a,"aria-labelledby":"how-to-play-dialog"},c.a.createElement(T.a,{id:"how-to-play-dialog"},c.a.createElement(h.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},c.a.createElement(h.a,{item:!0},"How to play"),c.a.createElement(h.a,{item:!0},c.a.createElement(P.a,{onClick:a},c.a.createElement(N.a,null))))),c.a.createElement(S.a,null,c.a.createElement(H,null)))},z=function(){return c.a.createElement(k,null,c.a.createElement(h.a,{item:!0},c.a.createElement(B.a,{variant:"h5"},"How to play")),c.a.createElement(h.a,{item:!0},c.a.createElement(H,null)))},J=Object(p.g)((function(e){var t=e.startGame,a=e.history,n=O(),r=Object(o.useState)("newGame"),i=Object(m.a)(r,2),l=i[0],u=i[1],s=Object(o.useState)(""),d=Object(m.a)(s,2),p=d[0],f=d[1],b=Object(o.useState)(""),w=Object(m.a)(b,2),C=w[0],x=w[1],S=p.length>0,T=C.length>0,P=S&&("newGame"===l||T),G="joinGame"===l?c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(g.a,{variant:"outlined",label:"Game code",onChange:function(e){x(e.target.value)},fullWidth:!0})):null;return c.a.createElement(h.a,{container:!0,direction:"column",alignItems:"center",spacing:3},c.a.createElement(h.a,{item:!0},c.a.createElement(k,null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),P&&t({mode:l,name:p,code:C,goToGame:function(e){return a.push("/game/".concat(e))}})}},c.a.createElement(h.a,{container:!0,spacing:2},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(h.a,{container:!0,direction:"row",justify:"center"},c.a.createElement(v.a,{value:l,onChange:function(e,t){u(t)},exclusive:!0,"aria-label":"game mode",className:n.buttonGroup},c.a.createElement(y.a,{value:"newGame",className:n.button},c.a.createElement(j,{symbol:"\u270f\ufe0f"}),c.a.createElement("span",null," New Game")),c.a.createElement(y.a,{value:"joinGame",className:n.button},c.a.createElement(j,{symbol:"\ud83d\udc65"}),c.a.createElement("span",null," Join Game"))))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(g.a,{variant:"outlined",label:"Player name",value:p,onChange:function(e){return f(e.target.value)},fullWidth:!0})),G,c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",disabled:!P},c.a.createElement(j,{symbol:"\ud83d\ude4c"}),c.a.createElement("span",null,"Go!"))))))),c.a.createElement(h.a,{item:!0},c.a.createElement(z,null)))})),Y=a(37),_=a.n(Y),V=a(76),K=a(143),q=a(1635),Q=a(659),X=a.n(Q),Z=a(660),$=a.n(Z),ee=Object(K.b)({name:"socket",initialState:{status:"disconnected",hasError:!1},reducers:{connectToSocketStarted:function(e){e.status="connecting"},connectToSocketSuccess:function(e){e.status="connected",e.hasError=!1},connectToSocketFailed:function(e){e.status="error",e.hasError=!0},disconnected:function(e){e.status="disconnected",e.hasError=!0}}}),te=ee.actions,ae=ee.reducer,ne=$()(),re=function(e){return e.game.gameState?Object.keys(e.game.gameState.players):[]},oe=function(e){return e.game.gameState?Object.keys(e.game.gameState.waitingPlayers):[]},ce=function(e,t){var a=e.game.gameState;return a?a.players[t]||a.waitingPlayers[t]:null},ie=function(e,t){var a=e.game.gameState;return!!a&&!!a.waitingPlayers[t]},le=function(e){var t=e.game.gameState;if(!t)return!1;var a=t.round.phase;return"createEntry"===a.name&&0===a.index},ue=function(e,t){var a=e.game.gameState;if(a&&"createEntry"===a.round.phase.name){var n=a.round.phase,r=a.round.order.indexOf(t),o=Object.keys(a.players).length,c=r-n.index,i=c<0?o+c:c,l=a.round.order[i];return a.round.stacks[l]}},se=function(e){return function(e,t){var a=e.game.gameState;if(a&&"createEntry"===a.round.phase.name){var n=a.round.phase;return ue(e,t).entries[n.index-1]}}(e,e.game.player)},me=function(e){if(le(e)){var t=e.game.gameState,a=e.game.player;if(!t||!a)return;return t.round.concepts[a]}return se(e).data.concept},de=function(e){return se(e).data.drawing},pe=function(e){if(le(e)){var t=e.game.gameState,a=e.game.player;if(!t||!a)return;return t.players[a].name}var n=se(e),r=ce(e,n.author);return null===r||void 0===r?void 0:r.name},fe=function(e,t){var a=e.game.gameState;if(!a||"createEntry"!==a.round.phase.name)return!1;var n=ue(e,t),r=n.entries[n.entries.length-1];return!!r&&r.author===t},he=function(e){if(e.game.submittedEntry)return!0;var t=e.game.gameState;if(!t||"createEntry"!==t.round.phase.name)return!1;var a=e.game.player;return fe(e,a)},ge={config:{},startingGame:!1,choosingConcept:void 0,submittedEntry:!1,acknowledgedWinner:!1,alerts:[]},Ee=Object(K.b)({name:"game",initialState:ge,reducers:{setPlayerName:function(e,t){e.config.name=t.payload},setCode:function(e,t){e.config.code=t.payload},setGamePlayer:function(e,t){e.player=t.payload.player},leaveGame:function(e){e.config={code:void 0,name:void 0},e.player=void 0,e.gameState=void 0,e.startingGame=!1,e.choosingConcept=void 0,e.submittedEntry=!1,e.chosenEntry=void 0,e.acknowledgedWinner=!1,e.alerts=[]},startGame:function(e){e.startingGame=!0},chooseConcept:function(e,t){e.choosingConcept=t.payload},submitEntry:function(e){e.submittedEntry=!0},chooseEntry:function(e,t){e.chosenEntry=t.payload},acknowledgeWinner:function(e){e.acknowledgedWinner=!0},updateGame:function(e,t){var a=t.payload,n=a.updateBy,r=a.gameState,o=a.alert;n===e.player&&(e.startingGame=!1,e.choosingConcept=void 0,e.submittedEntry=!1,e.chosenEntry=void 0,e.acknowledgedWinner=!1);var c=!!o,i=e.player,l=!(null===o||void 0===o?void 0:o.ignorePlayers)||!o.ignorePlayers.includes(i);c&&l&&e.alerts.push(o),e.gameState&&e.gameState.lastUpdate>r.lastUpdate||(e.gameState=r)},dismissAlert:function(e){e.alerts.length>0&&e.alerts.shift()}}}),ye=Ee.actions,ve=Ee.reducer,be=function(e){var t=e.code,a=e.name,n=e.goToGame;return function(){var e=Object(V.a)(_.a.mark((function e(r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(ye.setPlayerName(a)),r(ye.setCode(t)),n(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},we=ye.dismissAlert,Ce=Object(u.b)(null,(function(e){return{startGame:function(t){var a=t.mode,n=t.name,r=t.code,o=t.goToGame;e("newGame"===a?function(e){var t=e.name,a=e.goToGame;return function(){var e=Object(V.a)(_.a.mark((function e(n){var r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(q.a)(),n(be({code:r,name:t,goToGame:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({name:n,goToGame:o}):be({name:n,code:r,goToGame:o}))}}}))(J),ke=a(266),je=a(267),Oe=a(87),xe=a(272),Se=a(271),Te=a(1636),Pe=a(1633),Ge=a(1621),Ne=Object(w.a)((function(){return{alert:{maxWidth:500}}})),We=function(e){var t=e.hasError,a=Ne(),n=t?"error":"info",r=t?c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:1},c.a.createElement(h.a,{item:!0},c.a.createElement(B.a,{variant:"h4"},c.a.createElement(j,{symbol:"\ud83d\ude48"}))),c.a.createElement(h.a,{item:!0},"Failed to connect, retrying...")):"Connecting...";return c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(Pe.a,{icon:!1,className:a.alert,variant:"outlined",severity:n},c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},c.a.createElement(h.a,{item:!0},c.a.createElement(Ge.a,{color:"inherit"})),c.a.createElement(h.a,{item:!0},r))))},Re=Object(u.b)((function(e){return{hasError:e.socket.hasError}}))(We),Ie=function(){return c.a.createElement(k,null,c.a.createElement(h.a,{container:!0,direction:"row",alignItems:"center",spacing:2},c.a.createElement(h.a,{item:!0},c.a.createElement(B.a,{variant:"h4"},c.a.createElement(j,{symbol:"\u270f\ufe0f"}))),c.a.createElement(h.a,{item:!0},c.a.createElement(B.a,null,"You will join the game in the next round."))))},Ue=a(661),Ae=a.n(Ue),De=Object(w.a)((function(e){return{buttonContainer:{paddingTop:e.spacing(3)}}})),Be=function(e,t,a){return 1===a?e:t},Le=function(e){var t=e.createdGame,a=e.creatorName,n=e.missingPlayers,r=e.onStart,i=e.gameFull,l=e.gameUrl,u=De(),s=t?c.a.createElement(E.a,{variant:"contained",color:"primary",disabled:n>0,onClick:r},c.a.createElement(j,{symbol:"\ud83d\ude80"}),c.a.createElement("span",null,"Start!")):null,d="";d=n>0?"Waiting for ".concat(n," more ").concat(Be("player","players",n),"."):t?"Ready to start?":"Waiting for ".concat(a," to start the game.");var p=Object(o.useState)(!1),f=Object(m.a)(p,2),g=f[0],y=f[1],v=function(){y(!1)};return c.a.createElement(h.a,{container:!0,direction:"column",spacing:3},c.a.createElement(h.a,{item:!0},c.a.createElement(k,null,c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(B.a,null,d)),c.a.createElement(h.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",className:u.buttonContainer},c.a.createElement(h.a,{item:!0},c.a.createElement(E.a,{variant:"contained",color:"secondary",disabled:i,onClick:function(){Ae()(l),y(!0)}},"Invite friends"),c.a.createElement(Te.a,{open:g,autoHideDuration:5e3,onClose:v,anchorOrigin:{vertical:"top",horizontal:"center"}},c.a.createElement(Pe.a,{onClose:v,severity:"success"},"Game code copied to clipboard!"))),c.a.createElement(h.a,{item:!0},s)))),c.a.createElement(h.a,{item:!0},c.a.createElement(z,null)))},Fe=Object(u.b)((function(e){var t=e.game.gameState,a=e.game.player,n=Object.keys(t.players).length,r=t.players[t.createdBy],o=window.location;return{creatorName:r.name,createdGame:r.id===a,missingPlayers:Math.max(0,4-n),gameFull:8===n,gameUrl:"".concat(o.protocol,"//").concat(o.host,"/#/game/").concat(t.code)}}),(function(e){return{onStart:function(){e(function(){var e=Object(V.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ye.startGame()),e.next=3,ne.promise;case 3:e.sent.emit("startGame",{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(Le),He=function(e){var t=e.concept,a=e.selected,n=void 0!==a&&a,r=e.disabled,o=void 0!==r&&r,i=e.onClick;return c.a.createElement(U.a,{divider:!0,button:!0,onClick:i,selected:n,disabled:o},c.a.createElement(A.a,null,c.a.createElement(B.a,{variant:"h4"},c.a.createElement(j,{symbol:"\ud83d\udca1"}))),c.a.createElement(D.a,{primary:t}))},Me=function(e){var t=e.concepts,a=e.selectedConcept,n=e.onChooseConcept,r=a?"\u23f3":"\ud83e\udd2b",o=a?"You will start drawing as soon as every player has chosen what to draw.":"Choose what to draw. Keep it a secret!";return c.a.createElement(k,null,c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(B.a,null,c.a.createElement(j,{symbol:r}),c.a.createElement("span",null," ",o))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(I.a,null,t.map((function(e){return c.a.createElement(He,{key:e,concept:e,selected:a===e,disabled:!!a,onClick:function(){n(e)}})})))))},ze=Object(u.b)((function(e){var t,a=e.game.choosingConcept,n=null===(t=e.game.gameState)||void 0===t?void 0:t.round,r=n.phase,o=e.game.player,c=r.choices[o];return{selectedConcept:n.concepts[o]||a,concepts:c}}),(function(e){return{onChooseConcept:function(t){e(function(e){return function(){var t=Object(V.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ye.chooseConcept(e)),t.next=3,ne.promise;case 3:t.sent.emit("chooseConcept",{concept:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Me),Je=a(664),Ye=a.n(Je),_e=a(665),Ve=a.n(_e),Ke=a(666),qe=a.n(Ke),Qe=a(1637),Xe=Object(w.a)((function(){return{root:{borderRadius:4}}})),Ze=function(e){var t=e.title,a=e.icon,n=e.disabled,r=void 0!==n&&n,o=e.onClick,i=Xe();return c.a.createElement(Qe.a,{title:t,placement:"left"},c.a.createElement("span",null,c.a.createElement(P.a,{"aria-label":t,onClick:o,disabled:r,classes:{root:i.root}},a)))},$e=a(1638),et=a(268),tt=a.n(et),at=a(1618),nt=Object(w.a)((function(e){return{paper:{padding:e.spacing(3)}}})),rt=function(e){var t=e.title,a=e.icon,n=e.renderContent,r=nt(),i=Object(o.useState)(null),l=Object(m.a)(i,2),u=l[0],s=l[1],d=function(){s(null)},p=Boolean(u),f=p?"".concat(t,"-popover"):void 0;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ze,{title:t,icon:a,onClick:function(e){s(e.currentTarget)}}),c.a.createElement(at.a,{id:f,classes:{paper:r.paper},open:p,anchorEl:u,onClose:d,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"}},n({close:d})))},ot=Object(w.a)((function(){return{root:{flex:1,width:200,height:25,marginTop:18}}})),ct=function(e){return"".concat(e," px")},it=function(e){var t=e.lineWidth,a=e.onLineWidthChange,n=ot(),r=function(e,t){a(Array.isArray(t)?t[0]:t)};return c.a.createElement(rt,{title:"Line width",icon:c.a.createElement(tt.a,null),renderContent:function(){return c.a.createElement("div",{className:n.root},c.a.createElement($e.a,{value:t,getAriaValueText:ct,valueLabelDisplay:"on",step:1,min:1,max:50,onChange:r}))}})},lt=a(663),ut=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#7d7d7d","#262626"],st=function(e){var t=e.color,a=void 0===t?ut[0]:t,n=e.onColorChange;return c.a.createElement(rt,{title:"Color",icon:c.a.createElement(tt.a,{style:{color:a}}),renderContent:function(e){var t=e.close;return c.a.createElement(lt.CirclePicker,{colors:ut,color:a,onChangeComplete:function(e){t(),function(e){n(e.hex)}(e)}})}})},mt=a(380),dt=a.n(mt),pt=a(264);function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ht(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var gt=c.a.createElement("path",{d:"M16.24 3.56l4.95 4.94c.78.79.78 2.05 0 2.84L12 20.53a4.008 4.008 0 0 1-5.66 0L2.81 17c-.78-.79-.78-2.05 0-2.84l10.6-10.6c.79-.78 2.05-.78 2.83 0M4.22 15.58l3.54 3.53c.78.79 2.04.79 2.83 0l3.53-3.53l-4.95-4.95l-4.95 4.95z",fill:"#626262"}),Et=c.a.createElement("rect",{x:0,y:0,width:24,height:24,fill:"rgba(0, 0, 0, 0)"}),yt=function(e){var t=e.svgRef,a=e.title,n=ht(e,["svgRef","title"]);return c.a.createElement("svg",ft({width:24,height:24,preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",style:{msTransform:"rotate(360deg)",WebkitTransform:"rotate(360deg)",transform:"rotate(360deg)"},ref:t},n),a?c.a.createElement("title",null,a):null,gt,Et)},vt=c.a.forwardRef((function(e,t){return c.a.createElement(yt,ft({svgRef:t},e))})),bt=(a.p,function(e){return"pencil"===e?c.a.createElement(dt.a,null):c.a.createElement(pt.a,null,c.a.createElement(vt,null))}),wt=function(e){var t=e.tool,a=e.onToolChange;return c.a.createElement(rt,{title:"Tool",icon:bt(t),renderContent:function(e){var n=e.close;return c.a.createElement(v.a,{value:t,exclusive:!0,onChange:function(e,t){n(),a(t)},"aria-label":"text alignment"},c.a.createElement(y.a,{value:"pencil","aria-label":"pencil"},c.a.createElement(dt.a,null)),c.a.createElement(y.a,{value:"eraser","aria-label":"eraser"},c.a.createElement(pt.a,null,c.a.createElement(vt,null))))}})},Ct=function(e){var t=e.lineWidth,a=void 0===t?5:t,n=e.onLineWidthChange,r=e.color,o=void 0===r?"#f44336":r,i=e.onColorChange,l=e.tool,u=void 0===l?"pencil":l,s=e.onToolChange,m=e.canUndo,d=void 0!==m&&m,p=e.onUndo,f=e.canRedo,g=void 0!==f&&f,E=e.onRedo,y=e.onEraseAll;return c.a.createElement(h.a,{container:!0,direction:"column",spacing:0,alignItems:"center"},c.a.createElement(it,{lineWidth:a,onLineWidthChange:n}),c.a.createElement(st,{color:o,onColorChange:i}),c.a.createElement(wt,{tool:u,onToolChange:s}),c.a.createElement(Ze,{title:"Undo",icon:c.a.createElement(Ye.a,null),onClick:p,disabled:!d}),c.a.createElement(Ze,{title:"Redo",icon:c.a.createElement(Ve.a,null),onClick:E,disabled:!g}),c.a.createElement(Ze,{title:"Erase all",icon:c.a.createElement(qe.a,null),onClick:y}))},kt=a(1639),jt=a(667),Ot=Object(kt.a)(jt.SketchField)({border:"1px solid",borderRadius:4}),xt=function(e){Object(xe.a)(a,e);var t=Object(Se.a)(a);function a(e){var n;return Object(ke.a)(this,a),(n=t.call(this,e)).sketch=void 0,n.state={lineWidth:10,color:"#f44336",tool:"pencil",canUndo:!1,canRedo:!1},n.onLineWidthChange=n.onLineWidthChange.bind(Object(Oe.a)(n)),n.onColorChange=n.onColorChange.bind(Object(Oe.a)(n)),n.onToolChange=n.onToolChange.bind(Object(Oe.a)(n)),n.onUndo=n.onUndo.bind(Object(Oe.a)(n)),n.onRedo=n.onRedo.bind(Object(Oe.a)(n)),n.onEraseAll=n.onEraseAll.bind(Object(Oe.a)(n)),n.onSketchChange=n.onSketchChange.bind(Object(Oe.a)(n)),n}return Object(je.a)(a,[{key:"onLineWidthChange",value:function(e){this.setState({lineWidth:e})}},{key:"onColorChange",value:function(e){this.setState({color:e})}},{key:"onToolChange",value:function(e){this.setState({tool:e})}},{key:"onUndo",value:function(){this.sketch&&this.sketch.undo()}},{key:"onRedo",value:function(){this.sketch&&this.sketch.redo()}},{key:"onEraseAll",value:function(){this.sketch&&this.sketch.clear()}},{key:"onSketchChange",value:function(){if(this.sketch){var e=this.state,t=e.canUndo,a=e.canRedo,n=this.sketch.canUndo(),r=this.sketch.canRedo();(t!==n||a!==r)&&this.setState({canUndo:n,canRedo:r})}}},{key:"export",value:function(){return this.sketch?this.sketch.toDataURL():""}},{key:"render",value:function(){var e=this,t=this.state,a=t.lineWidth,n=t.color,r=t.tool,o=t.canUndo,i=t.canRedo,l="pencil"===r?n:"#ffffff";return c.a.createElement(h.a,{container:!0,direction:"row"},c.a.createElement(h.a,{item:!0,xs:2},c.a.createElement(Ct,{lineWidth:a,onLineWidthChange:this.onLineWidthChange,color:n,onColorChange:this.onColorChange,tool:r,onToolChange:this.onToolChange,canUndo:o,onUndo:this.onUndo,canRedo:i,onRedo:this.onRedo,onEraseAll:this.onEraseAll})),c.a.createElement(h.a,{item:!0,xs:10},c.a.createElement(Ot,{ref:function(t){e.sketch=t},height:480,tool:r,lineColor:l,lineWidth:a,onChange:this.onSketchChange})))}}]),a}(c.a.Component),St=function(e){var t=e.firstCreateTurn,a=e.submitted,n=e.concept,r=e.conceptFrom,i=e.onSubmit,l=Object(o.createRef)(),u=a?"\u23f3":"\u270f\ufe0f",s="";return s=a?"Waiting for everyone to finish their drawing.":t?'Draw "'.concat(n,'".'):"From ".concat(r,', draw "').concat(n,'".'),c.a.createElement(k,{width:800},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(B.a,null,c.a.createElement(j,{symbol:u}),c.a.createElement("span",null," ",s))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(xt,{ref:l})),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){var e=l.current;if(e){var t=e.export();i(t)}},disabled:a},c.a.createElement(j,{symbol:"\ud83c\udfa8"}),c.a.createElement("span",null,"Done"))))},Tt=Object(u.b)((function(e){return{firstCreateTurn:n.isFirstCreateTurn(e),concept:n.currentConcept(e),conceptFrom:n.sourceEntryAuthor(e),submitted:n.hasSubmitted(e)}}),(function(e){return{onSubmit:function(t){e(function(e){return function(){var t=Object(V.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ye.submitEntry()),t.next=3,ne.promise;case 3:t.sent.emit("submitEntry",{entry:{type:"drawing",drawing:e}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(St),Pt=Object(w.a)((function(){return{image:{width:400,borderRadius:4}}})),Gt=function(e){var t=e.author,a=e.image,n=e.submitted,r=e.onSubmit,i=Pt(),l=Object(o.useState)(""),u=Object(m.a)(l,2),s=u[0],d=u[1],p=n?"Waiting for everyone to guess.":"Guess what ".concat(t," drew."),f=n?"\u23f3":"\ud83d\udd75\ufe0f\u200d\u2642\ufe0f";return c.a.createElement(k,{width:800},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(B.a,null,c.a.createElement(j,{symbol:f}),c.a.createElement("span",null," ",p))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("img",{src:a,alt:p,className:i.image})),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(g.a,{variant:"outlined",label:"Guess",value:s,onChange:function(e){d(e.target.value)},disabled:n})),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){r(s)},disabled:n},c.a.createElement(j,{symbol:"\ud83c\udfa8"}),c.a.createElement("span",null,"Done"))))},Nt=Object(u.b)((function(e){return{submitted:n.hasSubmitted(e),author:n.sourceEntryAuthor(e),image:n.currentDrawing(e)}}),(function(e){return{onSubmit:function(t){e(function(e){return function(){var t=Object(V.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ye.submitEntry()),t.next=3,ne.promise;case 3:t.sent.emit("submitEntry",{entry:{type:"concept",concept:e}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Gt),Wt=function(e){return"draw"===e.type?c.a.createElement(Tt,null):c.a.createElement(Nt,null)},Rt=Object(u.b)((function(e){var t;return{type:(null===(t=e.game.gameState)||void 0===t?void 0:t.round.phase).index%2===0?"draw":"guess"}}))(Wt),It=a(1624),Ut=a(1622),At=a(1623),Dt=a(1640),Bt=a(269),Lt=a.n(Bt),Ft=Object(w.a)((function(e){return{container:{padding:e.spacing(3)},avatar:{backgroundColor:"rgba(0, 0, 0, 0)",width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(2)}}})),Ht=function(e){var t=e.name,a=e.avatar,n=e.entry,r=e.onClick,o=Ft(),i=c.a.createElement("div",{className:o.container},c.a.createElement(Ut.a,{avatar:c.a.createElement(Dt.a,{variant:"rounded",alt:t,className:o.avatar},c.a.createElement(Lt.a,{avatarStyle:"Circle",topType:a.topType,accessoriesType:a.accessoriesType,hairColor:a.hairColor,facialHairType:a.facialHairType,clotheType:a.clotheType,clotheColor:a.clotheColor,eyeType:a.eyeType,eyebrowType:a.eyebrowType,mouthType:a.mouthType,skinColor:a.skinColor})),title:t}),n),l=r?c.a.createElement(At.a,{onClick:r},i):i;return c.a.createElement(h.a,{item:!0,xs:12},l)},Mt=function(e){var t=e.name,a=e.avatar,n=e.image,r=e.onClick;return c.a.createElement(Ht,{name:t,avatar:a,entry:c.a.createElement(It.a,{component:"img",image:n,width:"500",title:"Entry by ".concat(t)}),onClick:r})},zt=Object(u.b)((function(e,t){var a=e.game.gameState.players[t.playerId];return{name:a.name,avatar:a.avatar}}))(Mt),Jt=a(1625),Yt=function(e){var t=e.name,a=e.avatar,n=e.concept,r=e.onClick;return c.a.createElement(Ht,{name:t,avatar:a,entry:c.a.createElement(Jt.a,null,c.a.createElement(B.a,{variant:"h4"},n)),onClick:r})},_t=Object(u.b)((function(e,t){var a=e.game.gameState.players[t.playerId];return{name:a.name,avatar:a.avatar}}))(Yt),Vt=Object(w.a)((function(e){return{paper:{padding:e.spacing(3),maxWidth:500},entryPaper:{maxWidth:500},selectedEntry:{borderWidth:4,borderColor:e.palette.primary.main},choicesContainer:{padding:e.spacing(3),maxWidth:500},img:{width:"100%"}}})),Kt=function(e){var t=e.winningEntry,a=e.concept,n=e.stackPlayerName,r=e.currentPlayerChose,o=e.chosenPlayerName,i=e.acknowledged,l=e.onAcknowledge,u=Vt(),s=r?"You chose the entry by ".concat(o,' for "').concat(a,'"!'):"".concat(n," chose the entry by ").concat(o,' for "').concat(a,'"!'),m="drawing"===t.data.type?c.a.createElement(zt,{playerId:t.author,image:t.data.drawing}):c.a.createElement(_t,{playerId:t.author,concept:t.data.concept}),d=r?null:c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(E.a,{variant:"contained",color:"primary",disabled:i,onClick:l},c.a.createElement(j,{symbol:"\ud83d\udc4f"}),c.a.createElement("span",null,"Next")));return c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(b.a,{elevation:1,variant:"outlined",className:u.paper},c.a.createElement(h.a,{container:!0,direction:"column",spacing:2},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(B.a,null,c.a.createElement(j,{symbol:"\ud83e\udd73"}),c.a.createElement("span",null," ",s))),c.a.createElement(h.a,{item:!0,xs:12},m),d)))},qt=function(e){var t=e.entries,a=e.concept,n=e.stackPlayerName,r=e.currentPlayerChooses,o=e.onChooseEntry,i=Vt(),l=r?'Choose your favourite entry for "'.concat(a,'".'):"".concat(n,' is choosing their favourite entry for "').concat(a,'".'),u=r?"\ud83e\udd14":"\ud83d\ude05",s=t[0].data,m=t.slice(1);return c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(h.a,{container:!0,direction:"column",spacing:4},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(b.a,{elevation:1,variant:"outlined",className:i.paper},c.a.createElement(h.a,{container:!0,direction:"column",spacing:2},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(B.a,null,c.a.createElement(j,{symbol:u}),c.a.createElement("span",null," ",l))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("img",{className:i.img,src:s.drawing,alt:"Initial drawing by ".concat(n)}))))),m.map((function(e){var t="drawing"===e.data.type?c.a.createElement(zt,{playerId:e.author,image:e.data.drawing,onClick:r?function(){o(e.author)}:void 0}):c.a.createElement(_t,{playerId:e.author,concept:e.data.concept,onClick:r?function(){o(e.author)}:void 0});return c.a.createElement(h.a,{item:!0,xs:12,key:e.author},c.a.createElement(b.a,{elevation:1,variant:"outlined",className:i.entryPaper},t))}))))},Qt=function(e){var t=e.entries,a=e.concept,n=e.stackPlayerName,r=e.currentPlayerChooses,o=e.chosenPlayerId,i=e.chosenPlayerName,l=e.acknowledged,u=e.onChooseEntry,s=e.onAcknowledge;return o?c.a.createElement(Kt,{winningEntry:t.find((function(e){return e.author===o})),concept:a,stackPlayerName:n,currentPlayerChose:r,chosenPlayerName:i,acknowledged:l,onAcknowledge:s}):c.a.createElement(qt,{entries:t,concept:a,stackPlayerName:n,currentPlayerChooses:r,onChooseEntry:u})},Xt=Object(u.b)((function(e){var t=e.game.gameState,a=t.round.phase,n=t.round.order[a.index],r=t.players[n].name,o=t.round.concepts[n],c=t.round.stacks[n],i=e.game.player,l=i===n,u=c.chosen||e.game.chosenEntry;return{stackPlayerName:r,concept:o,currentPlayerChooses:l,chosenPlayerId:u,chosenPlayerName:u?t.players[u].name:void 0,entries:c.entries,acknowledged:e.game.acknowledgedWinner||!!a.acknowledgedBy[i]}}),(function(e){return{onChooseEntry:function(t){e(function(e){return function(){var t=Object(V.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ye.chooseEntry(e)),t.next=3,ne.promise;case 3:t.sent.emit("chooseEntry",{targetPlayer:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},onAcknowledge:function(){e(function(){var e=Object(V.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ye.acknowledgeWinner()),e.next=3,ne.promise;case 3:e.sent.emit("acknowledgeWinner",{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(Qt),Zt=function(e){Object(xe.a)(a,e);var t=Object(Se.a)(a);function a(e){var n;return Object(ke.a)(this,a),(n=t.call(this,e)).unblock=void 0,n.onBeforeUnload=n.onBeforeUnload.bind(Object(Oe.a)(n)),n}return Object(je.a)(a,[{key:"onBeforeUnload",value:function(e){return e.returnValue="You will exit the game.","You will exit the game."}},{key:"componentDidMount",value:function(){var e=this.props,t=e.connect,a=e.history;t(),window.addEventListener("beforeunload",this.onBeforeUnload),this.unblock=a.block("Are you sure you want to leave the game?")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onBeforeUnload),(0,this.props.leave)(),this.unblock&&this.unblock()}},{key:"renderContent",value:function(){var e=this.props,t=e.connected,a=e.phaseName,n=e.waitingToJoin;if(!t)return c.a.createElement(Re,null);if(n)return c.a.createElement(Ie,null);switch(a){case"initial":return c.a.createElement(Fe,null);case"conceptChoice":return c.a.createElement(ze,null);case"createEntry":return c.a.createElement(Rt,null);case"entryChoice":return c.a.createElement(Xt,null);default:return c.a.createElement(B.a,null,"Unknown phase")}}},{key:"renderAlert",value:function(){var e=this.props,t=e.alert,a=e.dismissAlert,n=t?c.a.createElement(Pe.a,{onClose:a,severity:t.severity},t.message):void 0;return c.a.createElement(Te.a,{open:!!t,autoHideDuration:5e3,onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"center"}},n)}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,this.renderContent(),this.renderAlert())}}]),a}(c.a.Component),$t=Object(p.g)(Zt),ea=Object(u.b)((function(e){var t=e.game.gameState,a=e.game.player;return t&&a?{connected:!0,waitingToJoin:!!t.waitingPlayers[a],phaseName:t.round.phase.name,alert:e.game.alerts.length>0?e.game.alerts[0]:void 0}:{connected:!1,waitingToJoin:!1,phaseName:""}}),(function(e){return{connect:function(){e(function(){var e=Object(V.a)(_.a.mark((function e(t,a){var n,r,o,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(),r=n.game.config,o=r.name,c=r.code,e.next=3,ne.promise;case 3:e.sent.emit("joinGame",{name:o,code:c});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},leave:function(){e(function(){var e=Object(V.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ye.leaveGame()),e.next=3,ne.promise;case 3:e.sent.emit("leaveGame",{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},dismissAlert:function(){e(we())}}}))($t),ta=Object(p.g)((function(e){var t=e.joinGame,a=e.history,n=Object(o.useState)(""),r=Object(m.a)(n,2),i=r[0],l=r[1],u=Object(p.f)().code,s=function(){t({name:i,code:u,goToGame:function(e){return a.push("/game/".concat(e))}})},d=i.length>0;return c.a.createElement(h.a,{container:!0,direction:"column",alignItems:"center",spacing:3},c.a.createElement(h.a,{item:!0},c.a.createElement(k,null,c.a.createElement("form",{onSubmit:s},c.a.createElement(h.a,{container:!0,spacing:2},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(B.a,null,c.a.createElement(j,{symbol:"\ud83d\udc65"}),c.a.createElement("span",null,"Join a game"))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(g.a,{variant:"outlined",label:"Player name",value:i,onChange:function(e){l(e.target.value)},fullWidth:!0})),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(E.a,{variant:"contained",color:"primary",disabled:!d,onClick:s},c.a.createElement(j,{symbol:"\ud83d\ude4c"}),c.a.createElement("span",null,"Go!"))))))))})),aa=Object(u.b)(null,(function(e){return{joinGame:function(t){e(be(t))}}}))(ta),na=a(1626),ra=a(669),oa=a.n(ra),ca=a(270),ia=Object(w.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},drawerButton:Object(ca.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"})}})),la=a(1634),ua=function(){return c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},c.a.createElement(la.a,{smUp:!0,implementation:"css"},c.a.createElement(h.a,{item:!0},c.a.createElement(B.a,{variant:"h6",color:"inherit",noWrap:!0},"Doodle"))),c.a.createElement(la.a,{xsDown:!0,implementation:"css"},c.a.createElement(h.a,{item:!0},c.a.createElement(B.a,{variant:"h6",color:"inherit",noWrap:!0},"Doodle - A crazy drawing & guessing chain game"))))},sa=a(668),ma=a.n(sa),da=Object(w.a)((function(){return{iconButton:{color:"white"}}}));function pa(){return(pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function fa(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ha=c.a.createElement("title",null,"GitHub icon"),ga=c.a.createElement("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}),Ea=function(e){var t=e.svgRef,a=e.title,n=fa(e,["svgRef","title"]);return c.a.createElement("svg",pa({role:"img",viewBox:"0 0 24 24",ref:t},n),void 0===a?ha:a?c.a.createElement("title",null,a):null,ga)},ya=c.a.forwardRef((function(e,t){return c.a.createElement(Ea,pa({svgRef:t},e))})),va=(a.p,function(e){var t=e.gameStarted,a=da(),n=Object(o.useState)(!1),r=Object(m.a)(n,2),i=r[0],l=r[1],u=t?c.a.createElement(h.a,{item:!0},c.a.createElement(E.a,{className:a.iconButton,variant:"contained",color:"primary",onClick:function(){return l(!0)},startIcon:c.a.createElement(ma.a,null)},"How to play")):void 0;return c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:0},u,c.a.createElement(h.a,{item:!0},c.a.createElement(Qe.a,{title:"Check out the source code! \ud83d\udcbb",placement:"bottom"},c.a.createElement(P.a,{className:a.iconButton,onClick:function(){var e;e="https://github.com/dsaltares/doodle",window.open(e,"_blank")}},c.a.createElement(pt.a,null,c.a.createElement(ya,{href:"https://github.com/dsaltares/doodle"})))))),c.a.createElement(M,{open:i,onClose:function(){return l(!1)}}))}),ba=Object(u.b)((function(e){var t=e.game.gameState;return{gameStarted:!!t&&"initial"!==t.round.phase.name}}))(va),wa=function(e){var t=e.onToggleDrawer,a=ia();return c.a.createElement(na.a,{position:"fixed",className:a.appBar},c.a.createElement(f.a,null,c.a.createElement(h.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement(P.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:t,className:a.drawerButton},c.a.createElement(oa.a,null))),c.a.createElement(h.a,{item:!0},c.a.createElement(ua,null)))),c.a.createElement(h.a,{item:!0},c.a.createElement(ba,null)))))},Ca=a(1641),ka=Object(w.a)((function(){return{drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"}}})),ja=a(382),Oa=a(1630),xa=a(1629),Sa=a(381),Ta=a(1628),Pa=Object(w.a)((function(e){return{avatar:{backgroundColor:"rgba(0, 0, 0, 0)",width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(2)}}})),Ga={Ready:"\u2705",Looking:"\ud83d\udc40",Thinking:"\ud83e\udd14",Guessing:"\ud83d\udd75\ufe0f\u200d\u2642\ufe0f",Drawing:"\u270f\ufe0f"},Na=function(e){var t=e.name,a=e.avatar,n=e.points,r=e.state,o=Pa();return c.a.createElement(U.a,{divider:!0},c.a.createElement(A.a,null,c.a.createElement(Dt.a,{variant:"rounded",alt:t,className:o.avatar},c.a.createElement(Lt.a,{avatarStyle:"Circle",topType:a.topType,accessoriesType:a.accessoriesType,hairColor:a.hairColor,facialHairType:a.facialHairType,clotheType:a.clotheType,clotheColor:a.clotheColor,eyeType:a.eyeType,eyebrowType:a.eyebrowType,mouthType:a.mouthType,skinColor:a.skinColor}))),c.a.createElement(D.a,{primary:t,secondary:"".concat(n," ").concat(Be("point","points",n))}),r&&c.a.createElement(Ta.a,null,c.a.createElement(B.a,{variant:"h5"},c.a.createElement(j,{symbol:Ga[r]}))))},Wa=function(e,t,a){if(e.game.gameState&&!a){var r=e.game.gameState,o=r.createdBy===t,c=Object.keys(r.players).length;switch(r.round.phase.name){case"initial":return o?c>=4?"Thinking":"Looking":"Ready";case"conceptChoice":return!!r.round.concepts[t]?"Ready":"Thinking";case"createEntry":return n.playerHasSubmitted(e,t)?"Ready":r.round.phase.index%2===0?"Drawing":"Guessing";case"entryChoice":var i=r.round.phase,l=r.round.order[i.index]===t,u=!!r.round.stacks[t].chosen;return!!i.acknowledgedBy[t]?"Ready":u?l?"Ready":"Looking":l?"Thinking":"Looking"}}},Ra=Object(u.b)((function(e,t){var a=n.player(e,t.id),r=n.isWaiting(e,t.id);return Object(Sa.a)(Object(Sa.a)({},a),{},{state:Wa(e,t.id,r)})}))(Na),Ia=Object(w.a)((function(e){return{avatar:{width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(2)}}})),Ua=function(){var e=Ia();return c.a.createElement(U.a,{divider:!0},c.a.createElement(A.a,null,c.a.createElement(xa.a,{variant:"circle",height:64,width:64,className:e.avatar})),c.a.createElement(D.a,{primary:c.a.createElement(xa.a,{variant:"text",width:100}),secondary:c.a.createElement(xa.a,{variant:"text",width:50})}))},Aa=function(e){var t=e.visible,a=e.playerIds,n=e.minPlayers,r=e.maxPlayers,o=e.gameStarted;if(!t)return null;var i=a.length,l=Math.max(0,r-i),u=o?[]:Array.from(Array(l).keys()).map((function(e){return c.a.createElement(Ua,{key:"skeleton_".concat(e)})}));return c.a.createElement(I.a,{subheader:c.a.createElement(Oa.a,null,"Players - ","".concat(i<n?"".concat(n-i," needed"):i===r?"game full":"".concat(i,"/").concat(r)))},[].concat(Object(ja.a)(a.map((function(e){return c.a.createElement(Ra,{key:e,id:e})}))),Object(ja.a)(u)))},Da=Object(u.b)((function(e){return{visible:!!e.game.player,playerIds:n.playerIds(e),minPlayers:4,maxPlayers:8,gameStarted:Boolean(e.game.gameState&&"initial"!==e.game.gameState.round.phase.name)}}))(Aa),Ba=function(e){var t=e.visible,a=e.playerIds;return t?c.a.createElement(I.a,{subheader:c.a.createElement(Oa.a,null,"Waiting players")},a.map((function(e){return c.a.createElement(Ra,{key:e,id:e})}))):null},La=Object(u.b)((function(e){var t=e.game.gameState;return{visible:!!t&&Object.keys(t.waitingPlayers).length>0,playerIds:n.waitingPlayerIds(e)}}))(Ba),Fa=function(e){var t=e.drawerOpen,a=e.onToggleDrawer,n=ka(),r=c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,null),c.a.createElement("div",{className:n.drawerContainer},c.a.createElement(Da,null),c.a.createElement(La,null)));return c.a.createElement(c.a.Fragment,null,c.a.createElement(la.a,{smUp:!0,implementation:"css"},c.a.createElement(Ca.a,{variant:"temporary",className:n.drawer,classes:{paper:n.drawerPaper},open:t,onClose:a,ModalProps:{keepMounted:!0}},r)),c.a.createElement(la.a,{xsDown:!0,implementation:"css"},c.a.createElement(Ca.a,{variant:"permanent",className:n.drawer,classes:{paper:n.drawerPaper},open:!0},r)))},Ha=Object(w.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3)}}})),Ma=function(e){return Object(o.useEffect)(e,[])},za=function(e){var t=e.playerName,a=e.connect;Ma((function(){a()}));var n=Object(o.useState)(!1),r=Object(m.a)(n,2),i=r[0],l=r[1],u=function(){l(!i)},s=Ha();return c.a.createElement("div",{className:s.root},c.a.createElement(wa,{onToggleDrawer:u}),t?c.a.createElement(Fa,{drawerOpen:i,onToggleDrawer:u}):null,c.a.createElement("div",{className:s.content},c.a.createElement(f.a,null),c.a.createElement(d.a,null,c.a.createElement(p.c,null,c.a.createElement(p.a,{exact:!0,path:"/"},c.a.createElement(Ce,null)),c.a.createElement(p.a,{exact:!0,path:"/game/:code"},t?c.a.createElement(ea,null):c.a.createElement(aa,null))))))},Ja=Object(u.b)((function(e){return{playerName:e.game.config.name}}),(function(e){return{connect:function(){var t;e((t=function(t){!function(e,t){t.on("connectedToGame",(function(t){console.log("connectedToGame:",t),e(ye.setGamePlayer(t))})),t.on("gameUpdated",(function(t){console.log("gameUpdated:",t),e(ye.updateGame(t))})),t.on("gameDoesNotExist",(function(){console.log("gameDoesNotExist"),e(ye.leaveGame())})),t.on("disconnect",(function(){console.log("disconnect"),e(ye.leaveGame())}))}(e,t)},function(){var e=Object(V.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(te.connectToSocketStarted()),r=X()("https://api.doodle.saltares.com"),ne.resolve(r),["connect","reconnect"].forEach((function(e){r.on(e,(function(){a(te.connectToSocketSuccess()),t(r)}))})),["connect_error","connect_timeout","error","disconnected"].forEach((function(e){r.on(e,(function(){a(te.connectToSocketFailed())}))})),r.on("reconnecting",(function(){a(te.connectToSocketStarted())}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}}))(za),Ya=a(93),_a=Object(Ya.c)({socket:ae,game:ve}),Va=Object(K.a)({reducer:_a,devTools:!1});l.a.render(c.a.createElement(u.a,{store:Va},c.a.createElement(s.a,null),c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ja,null))),document.getElementById("root"))},470:function(e,t){},690:function(e,t,a){e.exports=a(1562)},730:function(e,t){},940:function(e,t){},941:function(e,t){}},[[690,1,2]]]);
//# sourceMappingURL=main.45529b6d.chunk.js.map