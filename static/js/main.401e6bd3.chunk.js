(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],{1001:function(e,t){},1003:function(e,t){},1039:function(e,t){},1040:function(e,t){},1101:function(e,t){},1525:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"playerIds",(function(){return z})),n.d(a,"waitingPlayerIds",(function(){return M})),n.d(a,"player",(function(){return J})),n.d(a,"isWaiting",(function(){return V})),n.d(a,"isFirstCreateTurn",(function(){return Y})),n.d(a,"conceptForCurrentPlayer",(function(){return _})),n.d(a,"getSourceEntry",(function(){return $})),n.d(a,"playerHasSubmitted",(function(){return q})),n.d(a,"hasSubmitted",(function(){return Q}));var r,o=n(0),c=n.n(o),i=n(33),l=n.n(i),u=n(27),s=n(1595),m=n(67),d=n(207),p=n(126),f=n(1591),h=n(1571),g=n(1596),E=n(1576),y=n(1575),v=n(1606),b=n(375),w=n(1568),k=Object(w.a)((function(e){return{paper:{padding:e.spacing(3),maxWidth:500}}})),C=k,j=function(e){var t=e.children,n=C();return c.a.createElement(h.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},c.a.createElement(b.a,{variant:"outlined",className:n.paper},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(h.a,{container:!0,direction:"column",spacing:2},t))))},O=function(e){var t=e.symbol,n=e.label,a=e.className;return c.a.createElement("span",{className:a,role:"img","aria-label":n,"aria-hidden":n?"false":"true"},t)},x=Object(w.a)((function(e){return{buttonGroup:{flex:1},button:{flex:1}}})),S=x,T=Object(p.g)((function(e){var t=e.startGame,n=e.history,a=S(),r=Object(o.useState)("newGame"),i=Object(m.a)(r,2),l=i[0],u=i[1],s=Object(o.useState)(""),d=Object(m.a)(s,2),p=d[0],f=d[1],b=Object(o.useState)(""),w=Object(m.a)(b,2),k=w[0],C=w[1],x=p.length>0,T=k.length>0,G=x&&("newGame"===l||T),W="joinGame"===l?c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(g.a,{variant:"outlined",label:"Game code",onChange:function(e){return C(e.target.value)},fullWidth:!0})):null;return c.a.createElement(j,null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),G&&t({mode:l,name:p,code:k,goToGame:function(e){return n.push("/game/".concat(e))}})}},c.a.createElement(h.a,{container:!0,spacing:2},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(h.a,{container:!0,direction:"row",justify:"center"},c.a.createElement(v.a,{value:l,onChange:function(e,t){return u(t)},exclusive:!0,"aria-label":"game mode",className:a.buttonGroup},c.a.createElement(y.a,{value:"newGame",className:a.button},c.a.createElement(O,{symbol:"\u270f\ufe0f"}),"New Game"),c.a.createElement(y.a,{value:"joinGame",className:a.button},c.a.createElement(O,{symbol:"\ud83d\udc65"}),c.a.createElement("span",null,"Join Game"))))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(g.a,{variant:"outlined",label:"Name",value:p,onChange:function(e){return f(e.target.value)},fullWidth:!0})),W,c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",disabled:!G},c.a.createElement(O,{symbol:"\ud83d\ude4c"}),c.a.createElement("span",null,"Go!"))))))})),G=n(36),W=n.n(G),N=n(77),P=n(142),R=n(1599),I=n(636),U=n.n(I),D=n(637),B=n.n(D),A=Object(P.b)({name:"socket",initialState:{status:"disconnected",hasError:!1},reducers:{connectToSocketStarted:function(e){e.status="connecting"},connectToSocketSuccess:function(e){e.status="connected",e.hasError=!1},connectToSocketFailed:function(e){e.status="error",e.hasError=!0},disconnected:function(e){e.status="disconnected",e.hasError=!0}}}),L=A.actions,F=A.reducer,H=B()(),z=function(e){return e.game.gameState?Object.keys(e.game.gameState.players):[]},M=function(e){return e.game.gameState?Object.keys(e.game.gameState.waitingPlayers):[]},J=function(e,t){var n=e.game.gameState;return n?n.players[t]||n.waitingPlayers[t]:null},V=function(e,t){var n=e.game.gameState;return!!n&&!!n.waitingPlayers[t]},Y=function(e){var t=e.game.gameState;if(!t)return!1;var n=t.round.phase;return"createEntry"===n.name&&0===n.index},_=function(e){var t=e.game.gameState,n=e.game.player;if(t&&n)return t.round.concepts[n]},K=function(e,t){var n=e.game.gameState;if(n&&"createEntry"===n.round.phase.name){var a=n.round.phase,r=n.round.order.indexOf(t),o=Object.keys(n.players).length,c=r-a.index,i=c<0?o+c:c,l=n.round.order[i];return n.round.stacks[l]}},$=function(e){return function(e,t){var n=e.game.gameState;if(n&&"createEntry"===n.round.phase.name){var a=n.round.phase;return K(e,t).entries[a.index-1]}}(e,e.game.player)},q=function(e,t){var n=e.game.gameState;if(!n||"createEntry"!==n.round.phase.name)return!1;var a=K(e,t),r=a.entries[a.entries.length-1];return!!r&&r.author===t},Q=function(e){if(e.game.submittedEntry)return!0;var t=e.game.gameState;if(!t||"createEntry"!==t.round.phase.name)return!1;var n=e.game.player;return q(e,n)},X={config:{},startingGame:!1,choosingConcept:void 0,submittedEntry:!1,acknowledgedWinner:!1,alerts:[]},Z=Object(P.b)({name:"game",initialState:X,reducers:{setPlayerName:function(e,t){e.config.name=t.payload},setCode:function(e,t){e.config.code=t.payload},setGamePlayer:function(e,t){e.player=t.payload.player},leaveGame:function(e){e.config={code:void 0,name:void 0},e.player=void 0,e.gameState=void 0,e.startingGame=!1,e.choosingConcept=void 0,e.submittedEntry=!1,e.chosenEntry=void 0,e.acknowledgedWinner=!1,e.alerts=[]},startGame:function(e){e.startingGame=!0},chooseConcept:function(e,t){e.choosingConcept=t.payload},submitEntry:function(e){e.submittedEntry=!0},chooseEntry:function(e,t){e.chosenEntry=t.payload},acknowledgeWinner:function(e){e.acknowledgedWinner=!0},updateGame:function(e,t){var n=t.payload,a=n.updateBy,r=n.gameState,o=n.alert;a===e.player&&(e.startingGame=!1,e.choosingConcept=void 0,e.submittedEntry=!1,e.chosenEntry=void 0,e.acknowledgedWinner=!1);var c=!!o,i=e.player,l=!(null===o||void 0===o?void 0:o.ignorePlayers)||!o.ignorePlayers.includes(i);if(c&&l&&e.alerts.push(o),e.gameState&&e.gameState.lastUpdate>r.lastUpdate)return e;e.gameState=r},dismissAlert:function(e){e.alerts.length>0&&e.alerts.shift()}}}),ee=Z.actions,te=Z.reducer,ne=function(e){var t=e.code,n=e.name,a=e.goToGame;return function(){var e=Object(N.a)(W.a.mark((function e(r){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(ee.setPlayerName(n)),r(ee.setCode(t)),a(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ae=ee.dismissAlert,re=Object(u.b)(null,(function(e){return{startGame:function(t){var n=t.mode,a=t.name,r=t.code,o=t.goToGame;e("newGame"===n?function(e){var t=e.name,n=e.goToGame;return function(){var e=Object(N.a)(W.a.mark((function e(a){var r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(R.a)(),a(ne({code:r,name:t,goToGame:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({name:a,goToGame:o}):ne({name:a,code:r,goToGame:o}))}}}))(T),oe=n(262),ce=n(263),ie=n(85),le=n(267),ue=n(268),se=n(111),me=n(1600),de=n(1597),pe=n(1578),fe=Object(w.a)((function(e){return{alert:{maxWidth:500}}})),he=function(e){var t=e.hasError,n=fe(),a=t?"error":"info",r=t?c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:1},c.a.createElement(h.a,{item:!0},c.a.createElement(se.a,{variant:"h4"},c.a.createElement(O,{symbol:"\ud83d\ude48"}))),c.a.createElement(h.a,{item:!0},"Failed to connect, retrying...")):"Connecting...";return c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(de.a,{icon:!1,className:n.alert,variant:"outlined",severity:a},c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},c.a.createElement(h.a,{item:!0},c.a.createElement(pe.a,{color:"inherit"})),c.a.createElement(h.a,{item:!0},r))))},ge=Object(u.b)((function(e){return{hasError:e.socket.hasError}}))(he),Ee=Object(w.a)((function(e){return{paper:function(t){return{padding:e.spacing(3),maxWidth:t.width}}}})),ye=function(e){var t=e.children,n=e.width,a=Ee({width:void 0===n?500:n});return c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(b.a,{variant:"outlined",className:a.paper},c.a.createElement(h.a,{container:!0,direction:"column",spacing:2},t)))},ve=function(){return c.a.createElement(ye,null,c.a.createElement(h.a,{container:!0,direction:"row",alignItems:"center",spacing:2},c.a.createElement(h.a,{item:!0},c.a.createElement(se.a,{variant:"h4"},c.a.createElement(O,{symbol:"\u270f\ufe0f"}))),c.a.createElement(h.a,{item:!0},c.a.createElement(se.a,null,"You will join the game in the next round."))))},be=n(638),we=n.n(be),ke=Object(w.a)((function(e){return{buttonContainer:{paddingTop:e.spacing(3)}}})),Ce=function(e){var t=e.message,n=e.startVisible,a=e.startDisabled,r=e.onStart,i=e.gameFull,l=e.gameUrl,u=ke(),s=n?c.a.createElement(E.a,{variant:"contained",color:"primary",disabled:a,onClick:r},c.a.createElement(O,{symbol:"\ud83d\ude80"}),c.a.createElement("span",null,"Start!")):null,d=Object(o.useState)(!1),p=Object(m.a)(d,2),f=p[0],g=p[1],y=function(){return g(!1)};return c.a.createElement(ye,null,c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(se.a,null,t)),c.a.createElement(h.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",className:u.buttonContainer},c.a.createElement(h.a,{item:!0},c.a.createElement(E.a,{variant:"contained",color:"secondary",disabled:i,onClick:function(){we()(l),g(!0)}},"Invite friends"),c.a.createElement(me.a,{open:f,autoHideDuration:5e3,onClose:y,anchorOrigin:{vertical:"top",horizontal:"center"}},c.a.createElement(de.a,{onClose:y,severity:"success"},"Game code copied to clipboard!"))),c.a.createElement(h.a,{item:!0},s)))},je=function(e,t,n){return 1===n?e:t},Oe=function(e,t,n){return e>0?"Waiting for ".concat(e," more ").concat(je("player","players",e)):t.id===n?"Ready to start?":"Waiting for ".concat(t.name," to start the game")},xe=Object(u.b)((function(e){var t=e.game.gameState,n=e.game.player,a=Object.keys(t.players).length,r=Math.max(0,4-a),o=t.players[t.createdBy],c=o.id===n,i=8===a,l=window.location;return{message:Oe(r,o,n),startVisible:c,startDisabled:r>0,gameFull:i,gameUrl:"".concat(l.protocol,"//").concat(l.host,"/#/game/").concat(t.code)}}),(function(e){return{onStart:function(){return e(function(){var e=Object(N.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ee.startGame()),e.next=3,H.promise;case 3:e.sent.emit("startGame",{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(Ce),Se=n(1574),Te=n(1579),Ge=n(1581),We=n(1580),Ne=function(e){var t=e.concept,n=e.selected,a=void 0!==n&&n,r=e.disabled,o=void 0!==r&&r,i=e.onClick;return c.a.createElement(Te.a,{divider:!0,button:!0,onClick:i,selected:a,disabled:o},c.a.createElement(We.a,null,c.a.createElement(se.a,{variant:"h4"},c.a.createElement(O,{symbol:"\ud83d\udca1"}))),c.a.createElement(Ge.a,{primary:t}))},Pe=function(e){var t=e.concepts,n=e.selectedConcept,a=e.onChooseConcept,r=n?"Waiting for other players to choose":"Choose a concept";return c.a.createElement(ye,null,c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(se.a,null,r)),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(Se.a,null,t.map((function(e){return c.a.createElement(Ne,{key:e,concept:e,selected:n===e,disabled:!!n,onClick:function(){return a(e)}})})))))},Re=Object(u.b)((function(e){var t,n=e.game.choosingConcept,a=null===(t=e.game.gameState)||void 0===t?void 0:t.round,r=a.phase,o=e.game.player,c=r.choices[o];return{selectedConcept:a.concepts[o]||n,concepts:c}}),(function(e){return{onChooseConcept:function(t){return e(function(e){return function(){var t=Object(N.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ee.chooseConcept(e)),t.next=3,H.promise;case 3:t.sent.emit("chooseConcept",{concept:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Pe),Ie=n(641),Ue=n.n(Ie),De=n(642),Be=n.n(De),Ae=n(643),Le=n.n(Ae),Fe=n(1577),He=n(1601),ze=Object(w.a)((function(e){return{root:{borderRadius:4}}})),Me=function(e){var t=e.title,n=e.icon,a=e.disabled,r=void 0!==a&&a,o=e.onClick,i=ze();return c.a.createElement(He.a,{title:t,placement:"left"},c.a.createElement("span",null,c.a.createElement(Fe.a,{"aria-label":t,onClick:o,disabled:r,classes:{root:i.root}},n)))},Je=n(1602),Ve=n(264),Ye=n.n(Ve),_e=n(1572),Ke=Object(w.a)((function(e){return{paper:{padding:e.spacing(3)}}})),$e=function(e){var t=e.title,n=e.icon,a=e.renderContent,r=Ke(),i=Object(o.useState)(null),l=Object(m.a)(i,2),u=l[0],s=l[1],d=function(){return s(null)},p=Boolean(u),f=p?"".concat(t,"-popover"):void 0;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Me,{title:t,icon:n,onClick:function(e){s(e.currentTarget)}}),c.a.createElement(_e.a,{id:f,classes:{paper:r.paper},open:p,anchorEl:u,onClose:d,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"}},a({close:d})))},qe=Object(w.a)((function(){return{root:{flex:1,width:200,height:25,marginTop:18}}})),Qe=function(e){return"".concat(e," px")},Xe=function(e){var t=e.lineWidth,n=e.onLineWidthChange,a=qe(),r=function(e,t){return n(Array.isArray(t)?t[0]:t)};return c.a.createElement($e,{title:"Line width",icon:c.a.createElement(Ye.a,null),renderContent:function(){return c.a.createElement("div",{className:a.root},c.a.createElement(Je.a,{value:t,getAriaValueText:Qe,valueLabelDisplay:"on",step:1,min:1,max:50,onChange:r}))}})},Ze=n(640),et=function(e){var t=e.color,n=e.onColorChange;return c.a.createElement($e,{title:"Color",icon:c.a.createElement(Ye.a,{style:{color:t}}),renderContent:function(e){var a=e.close;return c.a.createElement(Ze.CirclePicker,{color:t,onChangeComplete:function(e){a(),function(e){n(e.hex)}(e)}})}})},tt=n(372),nt=n.n(tt),at=n(373),rt=n.n(at),ot=function(e){return"pencil"===e?c.a.createElement(nt.a,null):c.a.createElement(rt.a,null)},ct=function(e){var t=e.tool,n=e.onToolchange;return c.a.createElement($e,{title:"Tool",icon:ot(t),renderContent:function(e){var a=e.close;return c.a.createElement(v.a,{value:t,exclusive:!0,onChange:function(e,t){a(),n(t)},"aria-label":"text alignment"},c.a.createElement(y.a,{value:"pencil","aria-label":"pencil"},c.a.createElement(nt.a,null)),c.a.createElement(y.a,{value:"eraser","aria-label":"eraser"},c.a.createElement(rt.a,null)))}})},it=function(e){var t=e.lineWidth,n=void 0===t?5:t,a=e.onLineWidthChange,r=e.color,o=void 0===r?"#f44336":r,i=e.onColorChange,l=e.tool,u=void 0===l?"pencil":l,s=e.onToolChange,m=e.canUndo,d=void 0!==m&&m,p=e.onUndo,f=e.canRedo,g=void 0!==f&&f,E=e.onRedo,y=e.onEraseAll;return c.a.createElement(h.a,{container:!0,direction:"column",spacing:0,alignItems:"center"},c.a.createElement(Xe,{lineWidth:n,onLineWidthChange:a}),c.a.createElement(et,{color:o,onColorChange:i}),c.a.createElement(ct,{tool:u,onToolchange:s}),c.a.createElement(Me,{title:"Undo",icon:c.a.createElement(Ue.a,null),onClick:p,disabled:!d}),c.a.createElement(Me,{title:"Redo",icon:c.a.createElement(Be.a,null),onClick:E,disabled:!g}),c.a.createElement(Me,{title:"Erase all",icon:c.a.createElement(Le.a,null),onClick:y}))},lt=n(1603),ut=n(644),st=Object(lt.a)(ut.SketchField)({border:"1px solid",borderRadius:4}),mt=function(e){Object(ue.a)(n,e);var t=Object(le.a)(n);function n(e){var a;return Object(oe.a)(this,n),(a=t.call(this,e)).sketch=void 0,a.state={lineWidth:10,color:"#f44336",tool:"pencil",canUndo:!1,canRedo:!1},a.onLineWidthChange=a.onLineWidthChange.bind(Object(ie.a)(a)),a.onColorChange=a.onColorChange.bind(Object(ie.a)(a)),a.onToolChange=a.onToolChange.bind(Object(ie.a)(a)),a.onUndo=a.onUndo.bind(Object(ie.a)(a)),a.onRedo=a.onRedo.bind(Object(ie.a)(a)),a.onEraseAll=a.onEraseAll.bind(Object(ie.a)(a)),a.onSketchChange=a.onSketchChange.bind(Object(ie.a)(a)),a}return Object(ce.a)(n,[{key:"onLineWidthChange",value:function(e){this.setState({lineWidth:e})}},{key:"onColorChange",value:function(e){this.setState({color:e})}},{key:"onToolChange",value:function(e){this.setState({tool:e})}},{key:"onUndo",value:function(){this.sketch&&this.sketch.undo()}},{key:"onRedo",value:function(){this.sketch&&this.sketch.redo()}},{key:"onEraseAll",value:function(){this.sketch&&this.sketch.clear()}},{key:"onSketchChange",value:function(){if(this.sketch){var e=this.state,t=e.canUndo,n=e.canRedo,a=this.sketch.canUndo(),r=this.sketch.canRedo();(t!==a||n!==r)&&this.setState({canUndo:a,canRedo:r})}}},{key:"export",value:function(){return this.sketch?this.sketch.toDataURL():""}},{key:"render",value:function(){var e=this,t=this.state,n=t.lineWidth,a=t.color,r=t.tool,o=t.canUndo,i=t.canRedo,l="pencil"===r?a:"#ffffff";return c.a.createElement(h.a,{container:!0,direction:"row"},c.a.createElement(h.a,{item:!0,xs:2},c.a.createElement(it,{lineWidth:n,onLineWidthChange:this.onLineWidthChange,color:a,onColorChange:this.onColorChange,tool:r,onToolChange:this.onToolChange,canUndo:o,onUndo:this.onUndo,canRedo:i,onRedo:this.onRedo,onEraseAll:this.onEraseAll})),c.a.createElement(h.a,{item:!0,xs:10},c.a.createElement(st,{ref:function(t){return e.sketch=t},height:"480px",tool:r,lineColor:l,lineWidth:n,onChange:this.onSketchChange})))}}]),n}(c.a.Component),dt=function(e){var t=e.message,n=e.submitted,a=e.onSubmit,r=Object(o.createRef)(),i=n?"Waiting for other players to finish their turn.":"";return c.a.createElement(ye,{width:800},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(se.a,null,t)),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(mt,{ref:r})),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(h.a,{container:!0,spacing:2,alignItems:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){var e=r.current;if(e){var t=e.export();a(t)}},disabled:n},c.a.createElement(O,{symbol:"\ud83c\udfa8"}),c.a.createElement("span",null,"Done"))),c.a.createElement(h.a,{item:!0},c.a.createElement(se.a,null,i)))))},pt=function(e){if(a.isFirstCreateTurn(e)){var t=a.conceptForCurrentPlayer(e);return'Draw "'.concat(t,'"')}var n=a.getSourceEntry(e),r=a.player(e,n.author),o=n.data.concept;return"From ".concat(null===r||void 0===r?void 0:r.name,', draw "').concat(o,'"')},ft=Object(u.b)((function(e){return{submitted:a.hasSubmitted(e),message:pt(e)}}),(function(e){return{onSubmit:function(t){return e(function(e){return function(){var t=Object(N.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ee.submitEntry()),t.next=3,H.promise;case 3:t.sent.emit("submitEntry",{entry:{type:"drawing",drawing:e}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(dt),ht=Object(w.a)((function(e){return{image:{width:400,borderRadius:4}}})),gt=function(e){var t=e.message,n=e.image,a=e.submitted,r=e.onSubmit,i=ht(),l=Object(o.useState)(""),u=Object(m.a)(l,2),s=u[0],d=u[1],p=a?"Waiting for other players to finish their turn.":"";return c.a.createElement(ye,{width:800},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(se.a,null,t)),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("img",{src:n,alt:t,className:i.image})),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(g.a,{variant:"outlined",label:"Guess",value:s,onChange:function(e){return d(e.target.value)},disabled:a})),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(h.a,{container:!0,spacing:2,alignItems:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){r(s)},disabled:a},c.a.createElement(O,{symbol:"\ud83c\udfa8"}),c.a.createElement("span",null,"Done"))),c.a.createElement(h.a,{item:!0},c.a.createElement(se.a,null,p)))))},Et=Object(u.b)((function(e){var t=a.getSourceEntry(e),n=t.data,r=a.player(e,t.author),o="Guess what ".concat(null===r||void 0===r?void 0:r.name," drew");return{submitted:a.hasSubmitted(e),message:o,image:n.drawing}}),(function(e){return{onSubmit:function(t){return e(function(e){return function(){var t=Object(N.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ee.submitEntry()),t.next=3,H.promise;case 3:t.sent.emit("submitEntry",{entry:{type:"concept",concept:e}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(gt),yt=function(e){return"draw"===e.type?c.a.createElement(ft,null):c.a.createElement(Et,null)},vt=Object(u.b)((function(e){var t;return{type:(null===(t=e.game.gameState)||void 0===t?void 0:t.round.phase).index%2===0?"draw":"guess"}}))(yt),bt=Object(w.a)((function(e){return{paper:{padding:e.spacing(3),maxWidth:500},entryPaper:{maxWidth:500},selectedEntry:{borderWidth:4,borderColor:e.palette.primary.main},choicesContainer:{padding:e.spacing(3),maxWidth:500},img:{width:"100%"}}})),wt=n(1584),kt=n(1582),Ct=n(1583),jt=n(1604),Ot=n(265),xt=n.n(Ot),St=Object(w.a)((function(e){return{container:{padding:e.spacing(3)},avatar:{backgroundColor:"rgba(0, 0, 0, 0)",width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(2)}}})),Tt=function(e){var t=e.name,n=e.avatar,a=e.entry,r=e.onClick,o=St(),i=c.a.createElement("div",{className:o.container},c.a.createElement(kt.a,{avatar:c.a.createElement(jt.a,{variant:"rounded",alt:t,className:o.avatar},c.a.createElement(xt.a,{avatarStyle:"Circle",topType:n.topType,accessoriesType:n.accessoriesType,hairColor:n.hairColor,facialHairType:n.facialHairType,clotheType:n.clotheType,clotheColor:n.clotheColor,eyeType:n.eyeType,eyebrowType:n.eyebrowType,mouthType:n.mouthType,skinColor:n.skinColor})),title:t}),a),l=r?c.a.createElement(Ct.a,{onClick:r},i):i;return c.a.createElement(h.a,{item:!0,xs:12},l)},Gt=function(e){var t=e.name,n=e.avatar,a=e.image,r=e.onClick;return c.a.createElement(Tt,{name:t,avatar:n,entry:c.a.createElement(wt.a,{component:"img",image:a,width:"500",title:"Entry by ".concat(t)}),onClick:r})},Wt=Object(u.b)((function(e,t){var n=e.game.gameState.players[t.playerId];return{name:n.name,avatar:n.avatar}}))(Gt),Nt=n(1585),Pt=function(e){var t=e.name,n=e.avatar,a=e.concept,r=e.onClick;return c.a.createElement(Tt,{name:t,avatar:n,entry:c.a.createElement(Nt.a,null,c.a.createElement(se.a,{variant:"h4"},a)),onClick:r})},Rt=Object(u.b)((function(e,t){var n=e.game.gameState.players[t.playerId];return{name:n.name,avatar:n.avatar}}))(Pt),It=function(e){var t=e.entries,n=e.concept,a=e.stackPlayerName,r=e.currentPlayerChooses,o=e.chosenPlayerId,i=e.chosenPlayerName,l=e.acknowledged,u=e.onChooseEntry,s=e.onAcknowledge,m=bt(),d=t[0].data,p=t.slice(1),f=r?null:c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(E.a,{variant:"contained",color:"primary",disabled:!i||l,onClick:s},c.a.createElement(O,{symbol:"\ud83d\udc4f"}),c.a.createElement("span",null,"Next")));return c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(h.a,{container:!0,direction:"column",spacing:4},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(b.a,{elevation:1,variant:"outlined",className:m.paper},c.a.createElement(h.a,{container:!0,direction:"column",spacing:2},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(se.a,null,r?i?"You chose the entry by ".concat(i,' for "').concat(n,'"!'):'Choose your favourite entry for "'.concat(n,'"'):i?"".concat(a," chose the entry by ").concat(i,' for "').concat(n,'"!'):"".concat(a,' is choosing their favourite entry for "').concat(n,'"'))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("img",{className:m.img,src:d.drawing,alt:"Initial drawing by ".concat(a)})),f))),p.map((function(e){var t=o===e.author,n="drawing"===e.data.type?c.a.createElement(Wt,{playerId:e.author,image:e.data.drawing,onClick:r?function(){return u(e.author)}:void 0}):c.a.createElement(Rt,{playerId:e.author,concept:e.data.concept,onClick:r?function(){return u(e.author)}:void 0});return c.a.createElement(h.a,{item:!0,xs:12,key:e.author},c.a.createElement(b.a,{elevation:1,variant:"outlined",className:"".concat(m.entryPaper," ").concat(t?m.selectedEntry:"")},n))}))))},Ut=Object(u.b)((function(e){var t=e.game.gameState,n=t.round.phase,a=t.round.order[n.index],r=t.players[a].name,o=t.round.concepts[a],c=t.round.stacks[a],i=e.game.player,l=i===a,u=c.chosen||e.game.chosenEntry;return{stackPlayerName:r,concept:o,currentPlayerChooses:l,chosenPlayerId:u,chosenPlayerName:u?t.players[u].name:void 0,entries:c.entries,acknowledged:e.game.acknowledgedWinner||!!n.acknowledgedBy[i]}}),(function(e){return{onChooseEntry:function(t){return e(function(e){return function(){var t=Object(N.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ee.chooseEntry(e)),t.next=3,H.promise;case 3:t.sent.emit("chooseEntry",{targetPlayer:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},onAcknowledge:function(){return e(function(){var e=Object(N.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ee.acknowledgeWinner()),e.next=3,H.promise;case 3:e.sent.emit("acknowledgeWinner",{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(It),Dt=function(e){Object(ue.a)(n,e);var t=Object(le.a)(n);function n(e){var a;return Object(oe.a)(this,n),(a=t.call(this,e)).unblock=void 0,a.onBeforeUnload=a.onBeforeUnload.bind(Object(ie.a)(a)),a}return Object(ce.a)(n,[{key:"onBeforeUnload",value:function(e){return e.returnValue="You will exit the game.","You will exit the game."}},{key:"componentDidMount",value:function(){var e=this.props,t=e.connect,n=e.history;t(),window.addEventListener("beforeunload",this.onBeforeUnload),this.unblock=n.block("Are you sure you want to leave the game?")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onBeforeUnload),(0,this.props.leave)(),this.unblock&&this.unblock()}},{key:"renderContent",value:function(){var e=this.props,t=e.connected,n=e.phaseName,a=e.waitingToJoin;if(!t)return c.a.createElement(ge,null);if(a)return c.a.createElement(ve,null);switch(n){case"initial":return c.a.createElement(xe,null);case"conceptChoice":return c.a.createElement(Re,null);case"createEntry":return c.a.createElement(vt,null);case"entryChoice":return c.a.createElement(Ut,null);default:return c.a.createElement(se.a,null,"Unknown phase")}}},{key:"renderAlert",value:function(){var e=this.props,t=e.alert,n=e.dismissAlert,a=t?c.a.createElement(de.a,{onClose:n,severity:t.severity},t.message):void 0;return c.a.createElement(me.a,{open:!!t,autoHideDuration:5e3,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"center"}},a)}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,this.renderContent(),this.renderAlert())}}]),n}(c.a.Component),Bt=Object(p.g)(Dt),At=Object(u.b)((function(e){var t=e.game.gameState,n=e.game.player;return t&&n?{connected:!0,waitingToJoin:!!t.waitingPlayers[n],phaseName:t.round.phase.name,alert:e.game.alerts.length>0?e.game.alerts[0]:void 0}:{connected:!1,waitingToJoin:!1,phaseName:""}}),(function(e){return{connect:function(){return e(function(){var e=Object(N.a)(W.a.mark((function e(t,n){var a,r,o,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.game.config,o=r.name,c=r.code,e.next=3,H.promise;case 3:e.sent.emit("joinGame",{name:o,code:c});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},leave:function(){return e(function(){var e=Object(N.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ee.leaveGame()),e.next=3,H.promise;case 3:e.sent.emit("leaveGame",{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},dismissAlert:function(){return e(ae())}}}))(Bt),Lt=Object(p.g)((function(e){var t=e.joinGame,n=e.history,a=Object(o.useState)(""),r=Object(m.a)(a,2),i=r[0],l=r[1],u=Object(p.f)().code,s=function(){return t({name:i,code:u,goToGame:function(e){return n.push("/game/".concat(e))}})},d=i.length>0;return c.a.createElement(j,null,c.a.createElement("form",{onSubmit:s},c.a.createElement(h.a,{container:!0,spacing:2},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(se.a,null,c.a.createElement(O,{symbol:"\ud83d\udc65"}),c.a.createElement("span",null,"Join a game"))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(g.a,{variant:"outlined",label:"Name",value:i,onChange:function(e){return l(e.target.value)},fullWidth:!0})),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(E.a,{variant:"contained",color:"primary",disabled:!d,onClick:s},c.a.createElement(O,{symbol:"\ud83d\ude4c"}),c.a.createElement("span",null,"Go!"))))))})),Ft=Object(u.b)(null,(function(e){return{joinGame:function(t){e(ne(t))}}}))(Lt),Ht=n(1590),zt=n(647),Mt=n.n(zt),Jt=n(266),Vt=Object(w.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},drawerButton:Object(Jt.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"})}})),Yt=n(1598),_t=function(){return c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},c.a.createElement(Yt.a,{smUp:!0,implementation:"css"},c.a.createElement(h.a,{item:!0},c.a.createElement(se.a,{variant:"h6",color:"inherit",noWrap:!0},"Doodle"))),c.a.createElement(Yt.a,{xsDown:!0,implementation:"css"},c.a.createElement(h.a,{item:!0},c.a.createElement(se.a,{variant:"h6",color:"inherit",noWrap:!0},"Doodle - A crazy drawing & guessing chain game"))))},Kt=n(260),$t=n(646),qt=n.n($t),Qt=Object(w.a)((function(){return{iconButton:{color:"white"}}}));function Xt(){return(Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Zt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var en=c.a.createElement("title",null,"GitHub icon"),tn=c.a.createElement("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}),nn=function(e){var t=e.svgRef,n=e.title,a=Zt(e,["svgRef","title"]);return c.a.createElement("svg",Xt({role:"img",viewBox:"0 0 24 24",ref:t},a),void 0===n?en:n?c.a.createElement("title",null,n):null,tn)},an=c.a.forwardRef((function(e,t){return c.a.createElement(nn,Xt({svgRef:t},e))}));n.p;function rn(){return(rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function on(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var cn=c.a.createElement("title",null,"Ko-fi icon"),ln=c.a.createElement("path",{d:"M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407 0 0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"}),un=function(e){var t=e.svgRef,n=e.title,a=on(e,["svgRef","title"]);return c.a.createElement("svg",rn({role:"img",viewBox:"0 0 24 24",ref:t},a),void 0===n?cn:n?c.a.createElement("title",null,n):null,ln)},sn=c.a.forwardRef((function(e,t){return c.a.createElement(un,rn({svgRef:t},e))})),mn=(n.p,n(1587)),dn=n(1589),pn=n(1588),fn=n(645),hn=n.n(fn),gn=n(1586),En=n(48),yn=function(e){var t=e.emoji,n=e.text,a=e.divider;return c.a.createElement(Te.a,{divider:a},c.a.createElement(We.a,null,c.a.createElement(se.a,{variant:"h4"},c.a.createElement(O,{symbol:t}))),c.a.createElement(Ge.a,{primary:n}))},vn=[{emoji:"\ud83c\udfae",text:"Create a game."},{emoji:"\ud83d\udd17",text:"Share the link with friends. Remember, Doodle is best played on a video call!"},{emoji:"\ud83e\udd2b",text:"Every player chooses a concept. But keep it secret!"},{emoji:"\u270f\ufe0f",text:"Draw your concept. Don't know how to draw? Worry not, the worse you draw, the more fun the round will be!"},{emoji:"\ud83e\udd14",text:"Now guess what another player drew."},{emoji:"\u270f\ufe0f",text:"Time to draw what another player guessed!"},{emoji:"\ud83d\ude4c",text:"When the round is done, each player chooses their favourite entry for their concept."}],bn=function(e){var t=e.open,n=e.onClose,a=Object(En.a)(),r=Object(gn.a)(a.breakpoints.down("sm"));return c.a.createElement(mn.a,{fullScreen:r,open:t,onClose:n,"aria-labelledby":"how-to-play-dialog"},c.a.createElement(pn.a,{id:"how-to-play-dialog"},c.a.createElement(h.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},c.a.createElement(h.a,{item:!0},"How to play"),c.a.createElement(h.a,{item:!0},c.a.createElement(Fe.a,{onClick:n},c.a.createElement(hn.a,null))))),c.a.createElement(dn.a,null,c.a.createElement(Se.a,null,vn.map((function(e,t){return c.a.createElement(yn,{key:t,emoji:e.emoji,text:e.text,divider:t<vn.length-1})})))))},wn=function(e){return window.open(e,"_blank")},kn=function(){var e=Qt(),t=Object(o.useState)(!1),n=Object(m.a)(t,2),a=n[0],r=n[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:0},c.a.createElement(h.a,{item:!0},c.a.createElement(E.a,{className:e.iconButton,variant:"contained",color:"primary",onClick:function(){return r(!0)},startIcon:c.a.createElement(qt.a,null)},"How to play")),c.a.createElement(h.a,{item:!0},c.a.createElement(He.a,{title:"Support the project on Ko-fi \u2615",placement:"bottom"},c.a.createElement(Fe.a,{className:e.iconButton,onClick:function(){return wn("https://ko-fi.com/dsaltares")}},c.a.createElement(Kt.a,null,c.a.createElement(sn,null))))),c.a.createElement(h.a,{item:!0},c.a.createElement(He.a,{title:"Check out the source code! \ud83d\udcbb",placement:"bottom"},c.a.createElement(Fe.a,{className:e.iconButton,onClick:function(){return wn("https://github.com/dsaltares/doodle")}},c.a.createElement(Kt.a,null,c.a.createElement(an,{href:"https://github.com/dsaltares/doodle"})))))),c.a.createElement(bn,{open:a,onClose:function(){return r(!1)}}))},Cn=function(e){var t=e.onToggleDrawer,n=Vt();return c.a.createElement(Ht.a,{position:"fixed",className:n.appBar},c.a.createElement(f.a,null,c.a.createElement(h.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement(Fe.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:t,className:n.drawerButton},c.a.createElement(Mt.a,null))),c.a.createElement(h.a,{item:!0},c.a.createElement(_t,null)))),c.a.createElement(h.a,{item:!0},c.a.createElement(kn,null)))))},jn=n(1605),On=Object(w.a)((function(e){return{drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"}}})),xn=n(374),Sn=n(1594),Tn=n(1593),Gn=n(648),Wn=n(1592),Nn=Object(w.a)((function(e){return{avatar:{backgroundColor:"rgba(0, 0, 0, 0)",width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(2)}}})),Pn={Ready:"\u2705",Looking:"\ud83d\udc40",Thinking:"\ud83e\udd14",Guessing:"\ud83d\udd75\ufe0f\u200d\u2642\ufe0f",Drawing:"\u270f\ufe0f"},Rn=function(e){var t=e.name,n=e.avatar,a=e.points,r=e.state,o=Nn();return c.a.createElement(Te.a,{divider:!0},c.a.createElement(We.a,null,c.a.createElement(jt.a,{variant:"rounded",alt:t,className:o.avatar},c.a.createElement(xt.a,{avatarStyle:"Circle",topType:n.topType,accessoriesType:n.accessoriesType,hairColor:n.hairColor,facialHairType:n.facialHairType,clotheType:n.clotheType,clotheColor:n.clotheColor,eyeType:n.eyeType,eyebrowType:n.eyebrowType,mouthType:n.mouthType,skinColor:n.skinColor}))),c.a.createElement(Ge.a,{primary:t,secondary:"".concat(a," ").concat(je("point","points",a))}),r&&c.a.createElement(Wn.a,null,c.a.createElement(se.a,{variant:"h5"},c.a.createElement(O,{symbol:Pn[r]}))))},In=function(e,t,n){if(e.game.gameState&&!n){var r=e.game.gameState,o=r.createdBy===t,c=Object.keys(r.players).length;switch(r.round.phase.name){case"initial":return o?c>=4?"Thinking":"Looking":"Ready";case"conceptChoice":return!!r.round.concepts[t]?"Ready":"Thinking";case"createEntry":return a.playerHasSubmitted(e,t)?"Ready":r.round.phase.index%2===0?"Drawing":"Guessing";case"entryChoice":var i=r.round.phase,l=r.round.order[i.index]===t,u=!!r.round.stacks[t].chosen;return!!i.acknowledgedBy[t]?"Ready":u?l?"Ready":"Looking":l?"Thinking":"Looking"}}},Un=Object(u.b)((function(e,t){var n=a.player(e,t.id),r=a.isWaiting(e,t.id);return Object(Gn.a)({},n,{state:In(e,t.id,r)})}))(Rn),Dn=Object(w.a)((function(e){return{avatar:{width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(2)}}})),Bn=function(){var e=Dn();return c.a.createElement(Te.a,{divider:!0},c.a.createElement(We.a,null,c.a.createElement(Tn.a,{variant:"circle",height:64,width:64,className:e.avatar})),c.a.createElement(Ge.a,{primary:c.a.createElement(Tn.a,{variant:"text",width:100}),secondary:c.a.createElement(Tn.a,{variant:"text",width:50})}))},An=function(e){var t=e.visible,n=e.playerIds,a=e.minPlayers,r=e.maxPlayers,o=e.gameStarted;if(!t)return null;var i=n.length,l=Math.max(0,r-i),u=o?[]:Array.from(Array(l).keys()).map((function(e){return c.a.createElement(Bn,{key:"skeleton_".concat(e)})}));return c.a.createElement(Se.a,{subheader:c.a.createElement(Sn.a,null,"Players - ","".concat(i<a?"".concat(a-i," needed"):i===r?"game full":"".concat(i,"/").concat(r)))},[].concat(Object(xn.a)(n.map((function(e){return c.a.createElement(Un,{key:e,id:e})}))),Object(xn.a)(u)))},Ln=Object(u.b)((function(e){return{visible:!!e.game.player,playerIds:a.playerIds(e),minPlayers:4,maxPlayers:8,gameStarted:Boolean(e.game.gameState&&"initial"!==e.game.gameState.round.phase.name)}}))(An),Fn=function(e){var t=e.visible,n=e.playerIds;return t?c.a.createElement(Se.a,{subheader:c.a.createElement(Sn.a,null,"Waiting players")},n.map((function(e){return c.a.createElement(Un,{key:e,id:e})}))):null},Hn=Object(u.b)((function(e){var t=e.game.gameState;return{visible:!!t&&Object.keys(t.waitingPlayers).length>0,playerIds:a.waitingPlayerIds(e)}}))(Fn),zn=function(e){var t=e.drawerOpen,n=e.onToggleDrawer,a=On(),r=c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,null),c.a.createElement("div",{className:a.drawerContainer},c.a.createElement(Ln,null),c.a.createElement(Hn,null)));return c.a.createElement(c.a.Fragment,null,c.a.createElement(Yt.a,{smUp:!0,implementation:"css"},c.a.createElement(jn.a,{variant:"temporary",className:a.drawer,classes:{paper:a.drawerPaper},open:t,onClose:n,ModalProps:{keepMounted:!0}},r)),c.a.createElement(Yt.a,{xsDown:!0,implementation:"css"},c.a.createElement(jn.a,{variant:"permanent",className:a.drawer,classes:{paper:a.drawerPaper},open:!0},r)))},Mn=Object(w.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3)}}})),Jn=function(e){return Object(o.useEffect)(e,[])},Vn=function(e){var t=e.playerName,n=e.connect;Jn((function(){n()}));var a=Object(o.useState)(!1),r=Object(m.a)(a,2),i=r[0],l=r[1],u=function(){return l(!i)},s=Mn();return c.a.createElement("div",{className:s.root},c.a.createElement(Cn,{onToggleDrawer:u}),t?c.a.createElement(zn,{drawerOpen:i,onToggleDrawer:u}):null,c.a.createElement("div",{className:s.content},c.a.createElement(f.a,null),c.a.createElement(d.a,null,c.a.createElement(p.c,null,c.a.createElement(p.a,{exact:!0,path:"/"},c.a.createElement(re,null)),c.a.createElement(p.a,{exact:!0,path:"/game/:code"},t?c.a.createElement(At,null):c.a.createElement(Ft,null))))))},Yn=Object(u.b)((function(e){return{playerName:e.game.config.name}}),(function(e){return{connect:function(){var t;e((t=function(t){!function(e,t){t.on("connectedToGame",(function(t){console.log("connectedToGame:",t),e(ee.setGamePlayer(t))})),t.on("gameUpdated",(function(t){console.log("gameUpdated:",t),e(ee.updateGame(t))})),t.on("gameDoesNotExist",(function(){console.log("gameDoesNotExist"),e(ee.leaveGame())})),t.on("disconnect",(function(){console.log("disconnect"),e(ee.leaveGame())}))}(e,t)},function(){var e=Object(N.a)(W.a.mark((function e(n){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(L.connectToSocketStarted()),r=U()("https://api.doodle.saltares.com"),H.resolve(r),["connect","reconnect"].forEach((function(e){r.on(e,(function(){n(L.connectToSocketSuccess()),t(r)}))})),["connect_error","connect_timeout","error","disconnected"].forEach((function(e){r.on(e,(function(){n(L.connectToSocketFailed())}))})),r.on("reconnecting",(function(){n(L.connectToSocketStarted())}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}}))(Vn),_n=n(92),Kn=Object(_n.c)({socket:F,game:te}),$n=Object(P.a)({reducer:Kn,devTools:!1});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(u.a,{store:$n},c.a.createElement(s.a,null),c.a.createElement(c.a.StrictMode,null,c.a.createElement(Yn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},460:function(e,t){},669:function(e,t,n){e.exports=n(1525)},707:function(e,t){},918:function(e,t){},919:function(e,t){}},[[669,1,2]]]);
//# sourceMappingURL=main.401e6bd3.chunk.js.map